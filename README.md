# waterfall-sinanews
## 标题:瀑布流新闻站
预览地址 https://xiaoweimei.github.io/waterfall-sinanews/
## 懒加载原理
1. 当页面加载时,检查该元素是否出现在视野中
2. 假如到达视野，就通过修改img标签下的src属性值使图片加载
3. 需要考虑函数节流与已经加载过的图片的过滤
## 瀑布流原理
1. 首先定义列数量
2. 初始化高度数组，可先将其全部设置为0
3. 摆放图片位置(需要图片onload之后再进行摆放)
4. 重置列高度数组，重复第三个步骤和第四个步骤
**补充说明**
1. 瀑布流布局要求图片宽度设置相同
2. 图片骗位置摆放应该采用绝对定位的方法来实现
## 实现原理
1. 使用ajax向服务器请求数据
2. 待数据到来之后将其拼接成dom节点
3. 结合上面的懒加载和瀑布流原理先将初始拼接好的dom节点放入对应位置
4. 检测是否到达底部，若是的话向服务器请求下一条数据，重复1,2,3步骤
**需要注意的是**
1. 因为使用的是绝对定位，应该自行设置容器高度以免父容器发生塌陷
2. 由于数据到来之前内部无内容，可能会使初始化高度数组时发生错误
3. 避免数据的重复请求
4. 避免节点的重复渲染，均需要加以控制
